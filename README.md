# TransparentTimer v1.0.9

**TransparentTimer** — это современное приложение для обратного отсчёта времени с прозрачным окном, которое идеально подходит для работы поверх других приложений. Оно предлагает гибкую настройку визуального стиля, звука и функциональности, обеспечивая удобство и интуитивно понятный интерфейс. В этом релизе реализован ряд улучшений для повышения стабильности, совместимости и удобства использования.

## Основные возможности

- **Прозрачное окно таймера**:
  - Размер окна 300x80 пикселей, с возможностью перемещения по экрану и сохранения позиции.
  - Настраиваемая прозрачность (от 10% до 100%) для ненавязчивого отображения.
  - Поддержка белого или чёрного фона с прозрачным эффектом.
- **Гибкая настройка текста**:
  - Выбор шрифта, размера (10–60) и стиля (обычный/жирный) через встроенный диалог.
  - Настраиваемые цвета текста для трёх состояний: положительное время (>0, зелёный), отрицательное время (<0, красный), состояние покоя (серый).
- **Прогресс-бар**:
  - Тонкий горизонтальный прогресс-бар (толщина 5 пикселей), синхронизированный с цветом текста таймера.
  - Возможность включения/выключения через настройку "Показывать прогресс".
- **Звуковые уведомления**:
  - Выбор пользовательского аудиофайла (форматы .wav, .mp3, .ogg) для сигнала по истечении таймера.
  - Настройка количества воспроизведений звука (по умолчанию 1).
  - Включение/выключение звука через интерфейс.
- **Пресеты**:
  - Сохранение и загрузка пользовательских пресетов (время, размер шрифта, прозрачность, цвет фона, настройки звука).
  - Возможность создания и удаления пресетов через интерфейс.
- **Темы интерфейса**:
  - Поддержка 14 современных тем `ttkbootstrap` (например, `flatly`, `darkly`, `cyborg`, `vapor`).
  - Переключение тем на лету через модальное окно настроек.
- **Автоматическое обновление**:
  - Проверка обновлений через GitHub с отображением прогресса загрузки.
  - Проверка SHA256-хеша для безопасности обновлений.
  - Создание резервной копии текущей версии перед установкой обновления.
- **Дополнительные функции**:
  - Отображение текущего времени в состоянии покоя (настраивается через чекбокс "Показывать время в покое").
  - Сброс позиции окна таймера в центр экрана.
  - Интуитивный интерфейс с блоком кнопок: "Старт", "Стоп", "Сигнал", "▶" (тест звука), "Сброс поз.".
  - Сохранение всех настроек в `%APPDATA%\TransparentTimer\settings.json`.

## Изменения в релизе

- **Исправление ошибок сборки**:
  - Устранена ошибка `_tkinter.TclError: Layout Horizontal.ThinProgressBar.TProgressbar not found` в собранном `exe` путём добавления резервного стиля `Horizontal.TProgressbar`.
  - Улучшена совместимость с PyInstaller для корректного включения ресурсов `ttkbootstrap`.
- **Улучшения прогресс-бара**:
  - Прогресс-бар теперь строго синхронизирован с цветом текста таймера во всех состояниях (положительное, отрицательное, покой).
  - Добавлена обработка исключений для стилей прогресс-бара, обеспечивающая стабильность в `exe`.
- **Оптимизация интерфейса**:
  - Блок кнопок ("Старт", "Стоп", "Сигнал", "▶", "Сброс поз.") восстановлен и размещён в окне настроек для удобного управления.
  - Чекбокс "Показывать прогресс" размещён справа от "Показывать время в покое" для логичного расположения.
- **Стабильность**:
  - Улучшена обработка ошибок при загрузке настроек, позиций и пресетов из JSON-файлов.
  - Добавлена проверка существования аудиофайлов перед воспроизведением.
- **Сборка**:
  - Обновлены инструкции для PyInstaller, включая явное добавление директории `ttkbootstrap` для устранения проблем со стилями в `exe`.

## Установка

Загрузите `TransparentTimerSetup.exe` из раздела релизов и запустите.

### Требования 
- Windows 10+ (поддержка других ОС возможна, но не тестировалась).

### Запуск из исходного кода
```bash
pip install ttkbootstrap pygame requests
python timer.py
```
